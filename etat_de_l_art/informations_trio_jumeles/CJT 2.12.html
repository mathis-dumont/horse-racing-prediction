<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur Jumelés et Trios - Par Gérard Bruneau - V 2.12</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .header-buttons {
            display: flex;
            gap: 10px;
        }
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ddd;
            border-bottom: none;
            background-color: #f9f9f9;
        }
        .tab.active {
            background-color: #fff;
            border-top: 2px solid #007BFF;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .bloc {
            background-color: #f9f9f9;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .bloc h2 {
            text-align: center;
            margin-bottom: 15px;
        }
        .columns {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .column {
            flex: 1;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        button {
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .button-primary {
            background-color: #007BFF;
        }
        .button-secondary {
            background-color: #6c757d;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
        .resultats-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .resultats-container .table-container {
            width: 48%;
        }
        .navigation-button {
            text-align: right;
            margin-top: 20px;
        }
        .navigation-button button {
            padding: 10px 20px;
        }
        .admin-password {
            display: none;
            margin-bottom: 20px;
        }
        .admin-password.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- En-tête avec les boutons -->
    <div class="header">
        <h1>Calculateur Jumelés et Trios - Par Gérard Bruneau - V 2.12</h1>
        <div class="header-buttons">
            <button id="generer-tableau" class="button-secondary" onclick="genererTableau()" aria-label="Générer le tableau">Générer le Tableau</button>
            <button id="calculer-rapports" class="button-secondary" onclick="calculerRapports()" aria-label="Calculer tous les rapports">Calculer Tous Les Rapports</button>
            <button id="valider-resultats" class="button-secondary" onclick="validerResultats()" aria-label="Valider les résultats officiels">Valider les Résultats Officiels</button>
            <button id="page-precedente" class="button-primary" onclick="allerAOngletPrecedent()" aria-label="Page précédente">Page Précédente</button>
            <button id="page-suivante" class="button-primary" onclick="allerAOngletSuivant()" aria-label="Page suivante">Page Suivante</button>
        </div>
    </div>

    <!-- Onglets -->
    <div class="tabs">
        <div class="tab active" data-tab="informations" onclick="changerOnglet('informations')">Informations Course</div>
        <div class="tab" data-tab="chevaux" onclick="changerOnglet('chevaux')">Chevaux et Cotes</div>
        <div class="tab" data-tab="rapports" onclick="changerOnglet('rapports')">Rapports Probables</div>
        <div class="tab" data-tab="resultats" onclick="changerOnglet('resultats')">Résultats Officiels</div>
        <div class="tab" data-tab="parametres" onclick="changerOnglet('parametres')">Paramètres</div>
    </div>

    <!-- Contenu des onglets -->
    <div id="informations" class="tab-content active">
        <div class="bloc">
            <h2>Renseigner la course</h2>
            <div class="columns">
                <div class="column">
                    <label for="nom-course">Nom de la Course :</label>
                    <input type="text" id="nom-course" placeholder="Entrez le nom de la course" required aria-required="true">

                    <label for="reunion">Réunion :</label>
                    <input type="text" id="reunion" placeholder="Entrez le numéro de réunion" required aria-required="true">

                    <label for="course">Course :</label>
                    <input type="text" id="course" placeholder="Entrez le numéro de course" required aria-required="true">

                    <label for="date-du-jour">Date du Jour :</label>
                    <input type="text" id="date-du-jour" readonly aria-label="Date du jour">
                </div>

                <div class="column">
                    <label for="reference">Référence :</label>
                    <input type="text" id="reference" readonly aria-label="Référence">

                    <label for="hippodrome">Hippodrome :</label>
                    <select id="hippodrome" aria-label="Sélectionnez un hippodrome">
                        <option value="">Sélectionnez un hippodrome</option>
                        <option value="ABBEVILLE">ABBEVILLE</option>
                        <option value="AGEN">AGEN</option>
                        <option value="AGON COUTAINVILLE">AGON COUTAINVILLE</option>
                        <option value="AIX LES BAINS">AIX LES BAINS</option>
                        <option value="AJACCIO">AJACCIO</option>
                        <!-- Liste complète des hippodromes -->
                    </select>
                </div>

                <div class="column">
                    <label for="type-course">Type de Course :</label>
                    <select id="type-course" aria-label="Sélectionnez un type de course">
                        <option value="">Sélectionnez un type de course</option>
                        <option value="Attelé">Attelé</option>
                        <option value="Cross-Country">Cross-Country</option>
                        <option value="Haies">Haies</option>
                        <option value="Monté">Monté</option>
                        <option value="Steeple">Steeple</option>
                    </select>

                    <label for="partants">Partants :</label>
                    <input type="number" id="partants" placeholder="Nombre de partants" min="1" required aria-required="true">

                    <label for="distance">Distance :</label>
                    <input type="number" id="distance" placeholder="Distance en mètres" min="1" required aria-required="true">

                    <label for="chevaux-a-jouer">Nombre de chevaux à jouer :</label>
                    <input type="number" id="chevaux-a-jouer" placeholder="Nombre de chevaux" min="1" required aria-required="true">
                </div>
            </div>

            <h3>Coefficients pour les Rapports Probables</h3>
            <div class="columns">
                <div class="column">
                    <h4>Jumelés</h4>
                    <label for="coeff-jumele-favoris">Favoris (< 4.00):</label>
                    <input type="number" step="0.1" id="coeff-jumele-favoris" value="0.7" min="0" required aria-required="true">

                    <label for="coeff-jumele-chances-moyennes">Chances Moyennes (4.00 - 9.00):</label>
                    <input type="number" step="0.1" id="coeff-jumele-chances-moyennes" value="1.1" min="0" required aria-required="true">

                    <label for="coeff-jumele-outsiders-moderes">Outsiders Modérés (9.00 - 12.00):</label>
                    <input type="number" step="0.1" id="coeff-jumele-outsiders-moderes" value="1.8" min="0" required aria-required="true">

                    <label for="coeff-jumele-gros-outsiders">Gros Outsiders (> 12.00):</label>
                    <input type="number" step="0.1" id="coeff-jumele-gros-outsiders" value="3.0" min="0" required aria-required="true">
                </div>

                <div class="column">
                    <h4>Trios</h4>
                    <label for="coeff-trio-favoris">Favoris (< 4.00):</label>
                    <input type="number" step="0.1" id="coeff-trio-favoris" value="0.6" min="0" required aria-required="true">

                    <label for="coeff-trio-chances-moyennes">Chances Moyennes (4.00 - 9.00):</label>
                    <input type="number" step="0.1" id="coeff-trio-chances-moyennes" value="1.0" min="0" required aria-required="true">

                    <label for="coeff-trio-outsiders-moderes">Outsiders Modérés (9.00 - 12.00):</label>
                    <input type="number" step="0.1" id="coeff-trio-outsiders-moderes" value="2.0" min="0" required aria-required="true">

                    <label for="coeff-trio-gros-outsiders">Gros Outsiders (> 12.00):</label>
                    <input type="number" step="0.1" id="coeff-trio-gros-outsiders" value="3.5" min="0" required aria-required="true">
                </div>
            </div>
        </div>
        <div class="navigation-button">
            <button class="button-primary" onclick="allerAOngletSuivant('informations')" aria-label="Page suivante">Page Suivante</button>
        </div>
    </div>

    <div id="chevaux" class="tab-content">
        <div class="bloc" id="tableau-container"></div>
        <div class="navigation-button">
            <button class="button-primary" onclick="allerAOngletPrecedent()" aria-label="Page précédente">Page Précédente</button>
            <button class="button-primary" onclick="allerAOngletSuivant('chevaux')" aria-label="Page suivante">Page Suivante</button>
        </div>
    </div>

    <div id="rapports" class="tab-content">
        <div class="resultats-container">
            <div class="table-container">
                <h3>Rapports Probables - Jumelés</h3>
                <table id="rapports-jumele">
                    <thead>
                        <tr>
                            <th>Combinaison</th>
                            <th>Rapport Net (€)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="table-container">
                <h3>Rapports Probables - Trios</h3>
                <table id="rapports-trio">
                    <thead>
                        <tr>
                            <th>Combinaison</th>
                            <th>Rapport Net (€)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        <div class="navigation-button">
            <button class="button-primary" onclick="allerAOngletPrecedent()" aria-label="Page précédente">Page Précédente</button>
            <button class="button-primary" onclick="allerAOngletSuivant('rapports')" aria-label="Page suivante">Page Suivante</button>
        </div>
    </div>

    <div id="resultats" class="tab-content">
        <div class="bloc">
            <h2>Résultats Officiels de la Course</h2>
            <div class="columns">
                <div class="column">
                    <label for="premier-place">1er Place :</label>
                    <input type="number" id="premier-place" placeholder="Numéro du cheval" min="1" required aria-required="true">

                    <label for="deuxieme-place">2ème Place :</label>
                    <input type="number" id="deuxieme-place" placeholder="Numéro du cheval" min="1" required aria-required="true">

                    <label for="troisieme-place">3ème Place :</label>
                    <input type="number" id="troisieme-place" placeholder="Numéro du cheval" min="1" required aria-required="true">

                    <label for="quatrieme-place">4ème Place :</label>
                    <input type="number" id="quatrieme-place" placeholder="Numéro du cheval" min="1" required aria-required="true">
                </div>

                <div class="column">
                    <label for="simple-gagnant">Simple Gagnant :</label>
                    <input type="number" id="simple-gagnant" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">

                    <label for="simple-place-1">Simple Placé 1 :</label>
                    <input type="number" id="simple-place-1" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">

                    <label for="simple-place-2">Simple Placé 2 :</label>
                    <input type="number" id="simple-place-2" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">

                    <label for="simple-place-3">Simple Placé 3 :</label>
                    <input type="number" id="simple-place-3" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">
                </div>

                <div class="column">
                    <label for="jumele-gagnant">Jumelé Gagnant :</label>
                    <input type="number" id="jumele-gagnant" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">

                    <label for="trio">Trio :</label>
                    <input type="number" id="trio" placeholder="Montant en €" min="0" step="0.01" required aria-required="true">
                </div>
            </div>
        </div>
        <div class="navigation-button">
            <button class="button-primary" onclick="allerAOngletPrecedent()" aria-label="Page précédente">Page Précédente</button>
            <button class="button-primary" onclick="allerAOngletSuivant('resultats')" aria-label="Page suivante">Page Suivante</button>
        </div>
    </div>

    <div id="parametres" class="tab-content">
        <div class="bloc">
            <h2>Paramètres Administrateur</h2>
            <div class="admin-password">
                <label for="admin-password">Mot de Passe Admin :</label>
                <input type="password" id="admin-password" placeholder="Entrez le mot de passe">
                <button class="button-secondary" onclick="verifierMotDePasse()" aria-label="Valider le mot de passe">Valider</button>
            </div>
            <div class="admin-settings" style="display: none;">
                <h3>Modifier les Plages de Cotes</h3>
                <div class="columns">
                    <div class="column">
                        <label for="plage-favoris">Favoris (max) :</label>
                        <input type="number" step="0.01" id="plage-favoris" value="4.00" min="0" required aria-required="true">

                        <label for="plage-chances-min">Chances Moyennes (min) :</label>
                        <input type="number" step="0.01" id="plage-chances-min" value="4.00" min="0" required aria-required="true">

                        <label for="plage-chances-max">Chances Moyennes (max) :</label>
                        <input type="number" step="0.01" id="plage-chances-max" value="9.00" min="0" required aria-required="true">

                        <label for="plage-outsiders-min">Outsiders Modérés (min) :</label>
                        <input type="number" step="0.01" id="plage-outsiders-min" value="9.00" min="0" required aria-required="true">

                        <label for="plage-outsiders-max">Outsiders Modérés (max) :</label>
                        <input type="number" step="0.01" id="plage-outsiders-max" value="12.00" min="0" required aria-required="true">

                        <label for="plage-gros-outsiders">Gros Outsiders (min) :</label>
                        <input type="number" step="0.01" id="plage-gros-outsiders" value="12.00" min="0" required aria-required="true">
                    </div>

                    <div class="column">
                        <h4>Modifier les Coefficients</h4>
                        <label for="admin-coeff-jumele-favoris">Favoris (Jumelés) :</label>
                        <input type="number" step="0.1" id="admin-coeff-jumele-favoris" value="0.7" min="0" required aria-required="true">

                        <label for="admin-coeff-jumele-chances">Chances Moyennes (Jumelés) :</label>
                        <input type="number" step="0.1" id="admin-coeff-jumele-chances" value="1.1" min="0" required aria-required="true">

                        <label for="admin-coeff-jumele-outsiders">Outsiders Modérés (Jumelés) :</label>
                        <input type="number" step="0.1" id="admin-coeff-jumele-outsiders" value="1.8" min="0" required aria-required="true">

                        <label for="admin-coeff-jumele-gros-outsiders">Gros Outsiders (Jumelés) :</label>
                        <input type="number" step="0.1" id="admin-coeff-jumele-gros-outsiders" value="3.0" min="0" required aria-required="true">

                        <label for="admin-coeff-trio-favoris">Favoris (Trios) :</label>
                        <input type="number" step="0.1" id="admin-coeff-trio-favoris" value="0.6" min="0" required aria-required="true">

                        <label for="admin-coeff-trio-chances">Chances Moyennes (Trios) :</label>
                        <input type="number" step="0.1" id="admin-coeff-trio-chances" value="1.0" min="0" required aria-required="true">

                        <label for="admin-coeff-trio-outsiders">Outsiders Modérés (Trios) :</label>
                        <input type="number" step="0.1" id="admin-coeff-trio-outsiders" value="2.0" min="0" required aria-required="true">

                        <label for="admin-coeff-trio-gros-outsiders">Gros Outsiders (Trios) :</label>
                        <input type="number" step="0.1" id="admin-coeff-trio-gros-outsiders" value="3.5" min="0" required aria-required="true">
                    </div>
                </div>
                <button class="button-secondary" onclick="enregistrerParametres()" aria-label="Enregistrer les paramètres">Enregistrer les Paramètres</button>
            </div>
        </div>
    </div>

    <script>
        // Remplir automatiquement la date du jour
        window.onload = function() {
            const today = new Date();
            const formattedDate = `${String(today.getDate()).padStart(2, '0')}/${String(today.getMonth() + 1).padStart(2, '0')}/${today.getFullYear()}`;
            document.getElementById('date-du-jour').value = formattedDate;
            updateReference();
            changerOnglet('informations'); // Assurez-vous que l'onglet initial est sélectionné
        };

        // Mettre à jour la référence
        function updateReference() {
            const reunion = document.getElementById('reunion').value.padStart(2, '0');
            const course = document.getElementById('course').value.padStart(2, '0');
            const dateDuJour = document.getElementById('date-du-jour').value;
            const reference = `${dateDuJour}-R${reunion}-C${course}`;
            document.getElementById('reference').value = reference;
        }

        // Écouter les changements sur les champs Réunion et Course
        document.getElementById('reunion').addEventListener('input', updateReference);
        document.getElementById('course').addEventListener('input', updateReference);

        // Fonction pour changer d'onglet
        function changerOnglet(id) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));

            document.querySelector(`.tab[data-tab="${id}"]`).classList.add('active');
            document.getElementById(id).classList.add('active');

            // Masquer tous les boutons
            document.getElementById('generer-tableau').style.display = 'none';
            document.getElementById('calculer-rapports').style.display = 'none';
            document.getElementById('valider-resultats').style.display = 'none';
            document.getElementById('page-precedente').style.display = 'none';
            document.getElementById('page-suivante').style.display = 'none';

            // Afficher les boutons en fonction de l'onglet actif
            if (id === 'informations') {
                document.getElementById('page-suivante').style.display = 'inline-block';
            } else if (id === 'chevaux') {
                document.getElementById('generer-tableau').style.display = 'inline-block';
                document.getElementById('page-precedente').style.display = 'inline-block';
                document.getElementById('page-suivante').style.display = 'inline-block';
            } else if (id === 'rapports') {
                document.getElementById('calculer-rapports').style.display = 'inline-block';
                document.getElementById('page-precedente').style.display = 'inline-block';
                document.getElementById('page-suivante').style.display = 'inline-block';
            } else if (id === 'resultats') {
                document.getElementById('valider-resultats').style.display = 'inline-block';
                document.getElementById('page-precedente').style.display = 'inline-block';
                document.getElementById('page-suivante').style.display = 'inline-block';
            } else if (id === 'parametres') {
                document.getElementById('page-precedente').style.display = 'inline-block';
            }
        }

        // Fonction pour aller à l'onglet suivant
        function allerAOngletSuivant() {
            const tabOrder = ['informations', 'chevaux', 'rapports', 'resultats', 'parametres'];
            const currentTab = document.querySelector('.tab.active').getAttribute('data-tab');
            const currentIndex = tabOrder.indexOf(currentTab);
            const nextIndex = (currentIndex + 1) % tabOrder.length;
            changerOnglet(tabOrder[nextIndex]);
        }

        // Fonction pour aller à l'onglet précédent
        function allerAOngletPrecedent() {
            const tabOrder = ['informations', 'chevaux', 'rapports', 'resultats', 'parametres'];
            const currentTab = document.querySelector('.tab.active').getAttribute('data-tab');
            const currentIndex = tabOrder.indexOf(currentTab);
            const prevIndex = (currentIndex - 1 + tabOrder.length) % tabOrder.length;
            changerOnglet(tabOrder[prevIndex]);
        }

        // Vérifier le mot de passe admin
        function verifierMotDePasse() {
            const password = document.getElementById('admin-password').value;
            if (password === "admin123") { // Mot de passe admin
                document.querySelector('.admin-password').style.display = 'none';
                document.querySelector('.admin-settings').style.display = 'block';
            } else {
                alert("Mot de passe incorrect !");
            }
        }

        // Enregistrer les paramètres modifiés
        function enregistrerParametres() {
            // Plages de cotes
            document.getElementById('coeff-jumele-favoris').value = document.getElementById('admin-coeff-jumele-favoris').value;
            document.getElementById('coeff-jumele-chances-moyennes').value = document.getElementById('admin-coeff-jumele-chances').value;
            document.getElementById('coeff-jumele-outsiders-moderes').value = document.getElementById('admin-coeff-jumele-outsiders').value;
            document.getElementById('coeff-jumele-gros-outsiders').value = document.getElementById('admin-coeff-jumele-gros-outsiders').value;

            document.getElementById('coeff-trio-favoris').value = document.getElementById('admin-coeff-trio-favoris').value;
            document.getElementById('coeff-trio-chances-moyennes').value = document.getElementById('admin-coeff-trio-chances').value;
            document.getElementById('coeff-trio-outsiders-moderes').value = document.getElementById('admin-coeff-trio-outsiders').value;
            document.getElementById('coeff-trio-gros-outsiders').value = document.getElementById('admin-coeff-trio-gros-outsiders').value;

            alert("Paramètres enregistrés !");
        }

        // Fonction pour générer le tableau dynamique
        function genererTableau() {
            const nombreChevaux = document.getElementById('chevaux-a-jouer').value;
            if (!nombreChevaux || nombreChevaux <= 0) {
                alert("Veuillez entrer un nombre valide de chevaux à jouer.");
                return;
            }

            let tableauHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Numéro</th>
                            <th>Cote</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (let i = 1; i <= nombreChevaux; i++) {
                tableauHTML += `
                    <tr>
                        <td><input type="number" class="numero-cheval" placeholder="Numéro du cheval" min="1" required aria-required="true"></td>
                        <td><input type="number" step="0.01" class="cote-cheval" placeholder="Cote" min="0" required aria-required="true"></td>
                    </tr>
                `;
            }

            tableauHTML += `
                    </tbody>
                </table>
            `;

            document.getElementById('tableau-container').innerHTML = tableauHTML;
        }

        // Fonction pour calculer les rapports probables
        function calculerRapports() {
            const chevaux = [];
            const lignes = document.querySelectorAll('#tableau-container tbody tr');

            lignes.forEach(ligne => {
                const numero = ligne.querySelector('.numero-cheval').value;
                const cote = parseFloat(ligne.querySelector('.cote-cheval').value);
                if (numero && cote) {
                    chevaux.push({ numero, cote });
                }
            });

            if (chevaux.length < 2) {
                alert("Veuillez entrer au moins 2 chevaux avec leurs cotes.");
                return;
            }

            // Calculer les combinaisons pour les jumelés
            const jumeles = genererCombinaisons(chevaux, 2);
            const rapportsJumeles = calculerRapportsProbables(jumeles, chevaux, 'jumele');

            // Calculer les combinaisons pour les trios
            const trios = genererCombinaisons(chevaux, 3);
            const rapportsTrio = calculerRapportsProbables(trios, chevaux, 'trio');

            // Afficher les résultats dans les tableaux
            afficherRapports(rapportsJumeles, 'rapports-jumele');
            afficherRapports(rapportsTrio, 'rapports-trio');
        }

        // Fonction pour générer les combinaisons
        function genererCombinaisons(chevaux, k) {
            const result = [];
            const n = chevaux.length;

            function backtrack(start, current) {
                if (current.length === k) {
                    result.push([...current]);
                    return;
                }
                for (let i = start; i < n; i++) {
                    current.push(chevaux[i].numero);
                    backtrack(i + 1, current);
                    current.pop();
                }
            }

            backtrack(0, []);
            return result;
        }

        // Fonction pour récupérer les coefficients spécifiques
        function recupererCoefficients(typePari) {
            if (typePari === 'jumele') {
                return {
                    favoris: parseFloat(document.getElementById('coeff-jumele-favoris').value),
                    chancesMoyennes: parseFloat(document.getElementById('coeff-jumele-chances-moyennes').value),
                    outsidersModeres: parseFloat(document.getElementById('coeff-jumele-outsiders-moderes').value),
                    grosOutsiders: parseFloat(document.getElementById('coeff-jumele-gros-outsiders').value)
                };
            } else if (typePari === 'trio') {
                return {
                    favoris: parseFloat(document.getElementById('coeff-trio-favoris').value),
                    chancesMoyennes: parseFloat(document.getElementById('coeff-trio-chances-moyennes').value),
                    outsidersModeres: parseFloat(document.getElementById('coeff-trio-outsiders-moderes').value),
                    grosOutsiders: parseFloat(document.getElementById('coeff-trio-gros-outsiders').value)
                };
            }
        }

        // Fonction pour appliquer les coefficients en fonction des cotes
        function appliquerCoefficients(cote, coefficients) {
            if (cote < parseFloat(document.getElementById('plage-favoris').value)) {
                return coefficients.favoris;
            } else if (cote >= parseFloat(document.getElementById('plage-chances-min').value) && cote < parseFloat(document.getElementById('plage-chances-max').value)) {
                return coefficients.chancesMoyennes;
            } else if (cote >= parseFloat(document.getElementById('plage-outsiders-min').value) && cote < parseFloat(document.getElementById('plage-outsiders-max').value)) {
                return coefficients.outsidersModeres;
            } else {
                return coefficients.grosOutsiders;
            }
        }

        // Fonction pour calculer les rapports probables
        function calculerRapportsProbables(combinaisons, chevaux, typePari) {
            const coefficients = recupererCoefficients(typePari);

            return combinaisons.map(combinaison => {
                let rapport = 1;
                combinaison.forEach(numero => {
                    const cheval = chevaux.find(c => c.numero == numero);
                    if (cheval) {
                        const coefficient = appliquerCoefficients(cheval.cote, coefficients);
                        rapport *= cheval.cote * coefficient;
                    }
                });
                return { combinaison, rapport: Math.round(rapport * 100) / 100 };
            });
        }

        // Fonction pour afficher les rapports dans les tableaux
        function afficherRapports(rapports, tableId) {
            const tbody = document.querySelector(`#${tableId} tbody`);
            tbody.innerHTML = '';

            rapports.forEach(rapport => {
                const row = `
                    <tr>
                        <td>${rapport.combinaison.join('-')}</td>
                        <td>${rapport.rapport.toFixed(2)} €</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Fonction pour valider les résultats officiels
        function validerResultats() {
            const premier = parseInt(document.getElementById('premier-place').value);
            const deuxieme = parseInt(document.getElementById('deuxieme-place').value);
            const troisieme = parseInt(document.getElementById('troisieme-place').value);

            if (!premier || !deuxieme || !troisieme) {
                alert("Veuillez entrer les résultats officiels pour les 3 premières places.");
                return;
            }

            alert("Résultats validés !");
        }

        // Fonction pour réinitialiser tout
        function reinitialiser() {
            // Réinitialiser les champs du formulaire
            document.getElementById('nom-course').value = '';
            document.getElementById('reunion').value = '';
            document.getElementById('course').value = '';
            document.getElementById('reference').value = '';
            document.getElementById('hippodrome').value = '';
            document.getElementById('type-course').value = '';
            document.getElementById('partants').value = '';
            document.getElementById('distance').value = '';
            document.getElementById('chevaux-a-jouer').value = '';

            // Effacer le tableau dynamique
            document.getElementById('tableau-container').innerHTML = '';

            // Effacer les résultats officiels
            document.getElementById('premier-place').value = '';
            document.getElementById('deuxieme-place').value = '';
            document.getElementById('troisieme-place').value = '';
            document.getElementById('quatrieme-place').value = '';
            document.getElementById('simple-gagnant').value = '';
            document.getElementById('simple-place-1').value = '';
            document.getElementById('simple-place-2').value = '';
            document.getElementById('simple-place-3').value = '';
            document.getElementById('jumele-gagnant').value = '';
            document.getElementById('trio').value = '';

            // Effacer les tableaux des rapports probables
            document.querySelector('#rapports-jumele tbody').innerHTML = '';
            document.querySelector('#rapports-trio tbody').innerHTML = '';

            alert("Tout a été réinitialisé !");
        }
    </script>
</body>
</html>
